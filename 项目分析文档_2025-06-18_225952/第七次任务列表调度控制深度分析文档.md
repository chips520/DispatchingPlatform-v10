# SchedAppCore é¡¹ç›®ç¬¬ä¸ƒæ¬¡åˆ†ææ–‡æ¡£ï¼šä»»åŠ¡åˆ—è¡¨è°ƒåº¦æ§åˆ¶æ¶æ„ä¸ç»Ÿä¸€ç®€åŒ–æ–¹æ¡ˆ

**åˆ†ææ—¶é—´ï¼š** 2025-06-18 23:40:27  
**åˆ†æèŒƒå›´ï¼š** å½“å‰ä¸»ä»»åŠ¡/å­ä»»åŠ¡æ¶æ„åˆ†æã€è°ƒåº¦æ§åˆ¶æœºåˆ¶ã€ç»Ÿä¸€å•ä»»åŠ¡åˆ—è¡¨è®¾è®¡æ–¹æ¡ˆ  
**æ–‡æ¡£ç‰ˆæœ¬ï¼š** ç¬¬ä¸ƒæ¬¡åˆ†æ - ä»»åŠ¡è°ƒåº¦æ¶æ„é‡æ„è®¾è®¡  
**é‡ç‚¹å†…å®¹ï¼š** ä¸»ä»»åŠ¡å¥—å­ä»»åŠ¡é—®é¢˜åˆ†æã€ç»Ÿä¸€ä»»åŠ¡åˆ—è¡¨è®¾è®¡ã€ä¸Šå±‚ç”Ÿäº§å™¨æ¨¡å¼

---

## 1. å½“å‰ä»»åŠ¡æ¶æ„ç°çŠ¶åˆ†æ

### 1.1 ä¸»ä»»åŠ¡ä¸å­ä»»åŠ¡å±‚æ¬¡ç»“æ„

```
å½“å‰ä»»åŠ¡å±‚æ¬¡æ¶æ„
â”œâ”€â”€ ğŸ“‹ CTaskController (ä»»åŠ¡è°ƒåº¦æ§åˆ¶å™¨)
â”‚   â”œâ”€â”€ dictInsScheduled<long, InstructScheduledVo> (ä»»åŠ¡é˜Ÿåˆ—)
â”‚   â””â”€â”€ dictTaskMain<long, ICTaskMain> (ä¸»ä»»åŠ¡æ‰§è¡Œé˜Ÿåˆ—)
â”‚
â”œâ”€â”€ ğŸ¯ ICTaskMain (ä¸»ä»»åŠ¡æ¥å£) 
â”‚   â”œâ”€â”€ CTaskMain (ç¬¬ä¸€ç‰ˆä¸»ä»»åŠ¡å®ç°)
â”‚   â”œâ”€â”€ CTaskMainVSec (ç¬¬äºŒç‰ˆä¸»ä»»åŠ¡å®ç°)
â”‚   â”œâ”€â”€ dictTaskSub<string, ICTaskSub> (å­ä»»åŠ¡å­—å…¸)
â”‚   â”œâ”€â”€ dictRunQueueTask<string, CTaskData> (è¿è¡Œé˜Ÿåˆ—)
â”‚   â””â”€â”€ queueCTaskSub<ICTaskSub> (å­ä»»åŠ¡ç”Ÿæˆé˜Ÿåˆ—)
â”‚
â””â”€â”€ ğŸ”§ ICTaskSub (å­ä»»åŠ¡æ¥å£)
    â”œâ”€â”€ CTaskSub (ç¬¬ä¸€ç‰ˆå­ä»»åŠ¡å®ç°)
    â”œâ”€â”€ CTaskSubVSec (ç¬¬äºŒç‰ˆå­ä»»åŠ¡å®ç°)
    â””â”€â”€ å…·ä½“å·¥åºæŒ‡ä»¤æ‰§è¡Œé€»è¾‘
```

### 1.2 å½“å‰æ¶æ„é—®é¢˜å‰–æ

#### 1.2.1 å¤æ‚çš„åµŒå¥—ç®¡ç†

```csharp
// CTaskMain.cs - ä¸»ä»»åŠ¡åˆ›å»ºå­ä»»åŠ¡çš„å¤æ‚é€»è¾‘
private async Task MultiTaskSub(CTaskEvent ccdqEvent)
{
    // 1. å­ä»»åŠ¡è¿è¡Œæ•°é‡é™åˆ¶
    int taskRunCount = 2;
    if (this.taskController.MainController?.SysCfgInfo != null)
    {
        taskRunCount = this.taskController.MainController.SysCfgInfo.TaskRunCount;
        taskRunCount = Math.Min(5, taskRunCount); // æœ€å¤š5ä¸ªå¹¶å‘å­ä»»åŠ¡
    }
    
    // 2. å¤æ‚çš„å­ä»»åŠ¡ç”Ÿæˆå¾ªç¯
    while (taskController.TaskMode == TaskThreadMode.Single_Inner_Multi 
           || taskController.TaskMode == TaskThreadMode.Multi)
    {
        // 3. å­ä»»åŠ¡åˆ›å»ºä¸ç®¡ç†
        cTaskSub = new CTaskSub(this, this.taskController) 
        { 
            TargetNo = targetNo, 
            ScheduledVo = scheduledVo, 
            TaskStepDelay = delay 
        };
        
        // 4. å¤šå±‚æ¬¡å­—å…¸ç®¡ç†
        dictTaskSub.AddOrUpdate(cTaskSub.LockId, cTaskSub, (key, value) => cTaskSub);
        
        // 5. è¿è¡Œé˜Ÿåˆ—åŒ…è£…
        CTaskData cTaskData = new CTaskData() { TaskSub = cTaskSub };
        dictRunQueueTask.TryAdd(cTaskSub.LockId, cTaskData);
    }
}
```

#### 1.2.2 çŠ¶æ€ç®¡ç†å¤æ‚æ€§

```csharp
// ä¸»ä»»åŠ¡çŠ¶æ€ä¸å­ä»»åŠ¡çŠ¶æ€çš„å¤æ‚åŒæ­¥
public void Continue(CTaskEvent ccdqEvent)
{
    // å•å­ä»»åŠ¡ç»§ç»­
    if (!string.IsNullOrEmpty(ccdqEvent.TaskSubId))
    {
        SingleTaskSubExist(ccdqEvent, () => {
            if (!MainTools.IsTaskStateFlag(this.StateFlag, TaskStatusFlag.Pause))
            {
                resetEvent.Set();
            }
        });
    }
    else
    {
        // å¤šå­ä»»åŠ¡ç»§ç»­ - éœ€è¦éå†æ‰€æœ‰å­ä»»åŠ¡
        if (dictRunQueueTask.Count > 0)
        {
            foreach (KeyValuePair<string, CTaskData> kv in dictRunQueueTask)
            {
                if (MainTools.IsTaskStateFlag(kv.Value.TaskSub.StateFlag, TaskStatusFlag.Pause))
                {
                    CTaskEvent cloneEvent = ccdqEvent.Clone();
                    cloneEvent.EventType = CEventType.Task_Sub_Continue;
                    cloneEvent.TaskSubId = kv.Value.TaskSub.LockId;
                    kv.Value.ContinueAsync(cloneEvent);
                }
            }
        }
    }
}
```

#### 1.2.3 ä»»åŠ¡æ¨¡å¼æ··ä¹±

```csharp
// å¤æ‚çš„ä»»åŠ¡æ¨¡å¼åˆ¤æ–­é€»è¾‘åˆ†æ•£åœ¨å„å¤„
public enum TaskThreadMode
{
    Single,                 // å•ä»»åŠ¡æ¨¡å¼
    Multi,                 // å¤šä»»åŠ¡æ¨¡å¼  
    Single_Inner_Multi,    // å•ä»»åŠ¡å†…éƒ¨å¤šå­ä»»åŠ¡
    Multi_Inner_Single     // å¤šä»»åŠ¡å†…éƒ¨å•å­ä»»åŠ¡
}

// æ¯ä¸ªåœ°æ–¹éƒ½éœ€è¦åˆ¤æ–­4ç§æ¨¡å¼
if (taskController.TaskMode == TaskThreadMode.Single_Inner_Multi
    || taskController.TaskMode == TaskThreadMode.Multi
    || taskController.TaskMode == TaskThreadMode.Single
    || taskController.TaskMode == TaskThreadMode.Multi_Inner_Single)
```

---

## 2. æ¶æ„é—®é¢˜æ ¹å› åˆ†æ

### 2.1 è®¾è®¡ç†å¿µé—®é¢˜

```
é—®é¢˜æ ¹æºåˆ†æ
â”œâ”€â”€ ğŸ’­ è®¾è®¡ç†å¿µæ··ä¹±
â”‚   â”œâ”€â”€ ä¸»ä»»åŠ¡æ‰¿æ‹…äº†è°ƒåº¦èŒè´£
â”‚   â”œâ”€â”€ å­ä»»åŠ¡æ‰¿æ‹…äº†æ‰§è¡ŒèŒè´£
â”‚   â””â”€â”€ èŒè´£è¾¹ç•Œä¸æ¸…æ™°
â”‚
â”œâ”€â”€ ğŸ“Š çŠ¶æ€ç®¡ç†å¤æ‚  
â”‚   â”œâ”€â”€ ä¸»ä»»åŠ¡çŠ¶æ€ (StateFlag)
â”‚   â”œâ”€â”€ å­ä»»åŠ¡çŠ¶æ€ (StateFlag)
â”‚   â”œâ”€â”€ ä»»åŠ¡æ•°æ®çŠ¶æ€ (CTaskData)
â”‚   â””â”€â”€ è°ƒåº¦çŠ¶æ€ (InstructScheduledVo.TaskStatus)
â”‚
â”œâ”€â”€ ğŸ”„ ç”Ÿå‘½å‘¨æœŸæ··ä¹±
â”‚   â”œâ”€â”€ ä¸»ä»»åŠ¡ç®¡ç†å­ä»»åŠ¡åˆ›å»º
â”‚   â”œâ”€â”€ å­ä»»åŠ¡ç‹¬ç«‹æ‰§è¡Œç”Ÿå‘½å‘¨æœŸ
â”‚   â”œâ”€â”€ æ•°æ®åŒ…è£…ç±» (CTaskData) é¢å¤–ç®¡ç†
â”‚   â””â”€â”€ æ§åˆ¶å™¨ç¼“å­˜å¤šå±‚ç®¡ç†
â”‚
â””â”€â”€ ğŸš€ æ€§èƒ½å¼€é”€å¤§
    â”œâ”€â”€ å¤šå±‚å­—å…¸åµŒå¥—æŸ¥æ‰¾
    â”œâ”€â”€ çŠ¶æ€åŒæ­¥å¼€é”€
    â”œâ”€â”€ äº‹ä»¶ä¼ é€’å±‚æ¬¡è¿‡æ·±
    â””â”€â”€ å†…å­˜å ç”¨é«˜
```

### 2.2 å…·ä½“é—®é¢˜å®ä¾‹

#### 2.2.1 ä»»åŠ¡æŸ¥æ‰¾å¤æ‚

```csharp
// å½“å‰æŸ¥æ‰¾å­ä»»åŠ¡éœ€è¦å¤šå±‚åµŒå¥—
public ICTaskSub GetCTaskSub(string taskSubId, long insScheduledId)
{
    ICTaskMain cTaskMain;
    dictTaskMain.TryGetValue(insScheduledId, out cTaskMain); // ç¬¬ä¸€å±‚æŸ¥æ‰¾
    if (cTaskMain != null)
    {
        return cTaskMain.GetCTaskSub(taskSubId); // ç¬¬äºŒå±‚æŸ¥æ‰¾
    }
    return null;
}

// CTaskMainä¸­çš„æŸ¥æ‰¾
public ICTaskSub GetCTaskSub(string taskSubId)
{
    dictTaskSub.TryGetValue(taskSubId, out var sub); // ç¬¬ä¸‰å±‚æŸ¥æ‰¾
    return sub;
}
```

#### 2.2.2 äº‹ä»¶ä¼ é€’å†—é•¿

```csharp
// äº‹ä»¶ä¼ é€’é“¾è·¯è¿‡é•¿
UI Event -> MainController -> CTaskController -> ICTaskMain -> ICTaskSub -> å®é™…æ‰§è¡Œ

// æ¯å±‚éƒ½éœ€è¦äº‹ä»¶è½¬å‘
taskController.FireEventMainController(new CTaskEvent() { ... });
```

#### 2.2.3 MQTTä»»åŠ¡å¤„ç†å¤æ‚

```csharp
// MQTTä»»åŠ¡éœ€è¦é€šè¿‡å¤æ‚çš„è½¬æ¢
MQTT TaskCommand -> InstructScheduledModel -> InstructScheduledVo -> ICTaskMain -> ICTaskSub
```

---

## 3. ç»Ÿä¸€å•ä»»åŠ¡åˆ—è¡¨è®¾è®¡æ–¹æ¡ˆ

### 3.1 ç»Ÿä¸€ä»»åŠ¡æ¶æ„è®¾è®¡

```
ç»Ÿä¸€ä»»åŠ¡æ¶æ„ (ç›®æ ‡æ¶æ„)
â”œâ”€â”€ ğŸ¯ ITaskProducer (ä¸Šå±‚ä»»åŠ¡ç”Ÿäº§å™¨æ¥å£)
â”‚   â”œâ”€â”€ MqttTaskProducer (MQTTä»»åŠ¡ç”Ÿäº§å™¨)
â”‚   â”œâ”€â”€ PlatformTaskProducer (å¹³å°ä»»åŠ¡ç”Ÿäº§å™¨)
â”‚   â”œâ”€â”€ ScriptTaskProducer (è„šæœ¬ä»»åŠ¡ç”Ÿäº§å™¨)
â”‚   â””â”€â”€ TimerTaskProducer (å®šæ—¶ä»»åŠ¡ç”Ÿäº§å™¨)
â”‚
â”œâ”€â”€ ğŸ“‹ CUnifiedTaskController (ç»Ÿä¸€ä»»åŠ¡è°ƒåº¦æ§åˆ¶å™¨)
â”‚   â”œâ”€â”€ taskQueue<CUnifiedTask> (ç»Ÿä¸€ä»»åŠ¡é˜Ÿåˆ—)
â”‚   â”œâ”€â”€ runningTasks<string, CUnifiedTask> (è¿è¡Œä¸­ä»»åŠ¡)
â”‚   â”œâ”€â”€ taskProducers<ITaskProducer> (ä»»åŠ¡ç”Ÿäº§å™¨åˆ—è¡¨)
â”‚   â””â”€â”€ taskExecutors<ITaskExecutor> (ä»»åŠ¡æ‰§è¡Œå™¨åˆ—è¡¨)  
â”‚
â””â”€â”€ ğŸ”§ CUnifiedTask (ç»Ÿä¸€ä»»åŠ¡å®ä½“)
    â”œâ”€â”€ TaskId (å…¨å±€å”¯ä¸€ä»»åŠ¡ID)
    â”œâ”€â”€ TaskSource (ä»»åŠ¡æ¥æºï¼šMQTT/Platform/Script/Timer)
    â”œâ”€â”€ InstructUnits (æŒ‡ä»¤å•å…ƒåˆ—è¡¨)
    â”œâ”€â”€ TaskContext (ä»»åŠ¡ä¸Šä¸‹æ–‡)
    â””â”€â”€ ExecutionState (æ‰§è¡ŒçŠ¶æ€)
```

### 3.2 æ ¸å¿ƒæ¥å£å®šä¹‰

```csharp
/// <summary>
/// ä»»åŠ¡ç”Ÿäº§å™¨æ¥å£ - è´Ÿè´£ä»»åŠ¡çš„åˆ›å»ºå’Œåˆ†å‘
/// </summary>
public interface ITaskProducer
{
    /// <summary>
    /// ä»»åŠ¡ç”Ÿäº§å™¨åç§°
    /// </summary>
    string ProducerName { get; }
    
    /// <summary>
    /// ä»»åŠ¡ç”Ÿäº§å™¨ç±»å‹
    /// </summary>
    TaskSourceType SourceType { get; }
    
    /// <summary>
    /// ç”Ÿäº§ä»»åŠ¡
    /// </summary>
    CUnifiedTask ProduceTask(object sourceData);
    
    /// <summary>
    /// éªŒè¯æºæ•°æ®
    /// </summary>
    bool ValidateSourceData(object sourceData);
    
    /// <summary>
    /// å¯åŠ¨ç”Ÿäº§å™¨
    /// </summary>
    void Start();
    
    /// <summary>
    /// åœæ­¢ç”Ÿäº§å™¨
    /// </summary>
    void Stop();
}

/// <summary>
/// ç»Ÿä¸€ä»»åŠ¡å®ä½“
/// </summary>
public class CUnifiedTask
{
    /// <summary>
    /// å…¨å±€å”¯ä¸€ä»»åŠ¡ID
    /// </summary>
    public string TaskId { get; set; }
    
    /// <summary>
    /// ä»»åŠ¡æ¥æºç±»å‹
    /// </summary>
    public TaskSourceType SourceType { get; set; }
    
    /// <summary>
    /// åŸå§‹ä»»åŠ¡æ•°æ®
    /// </summary>
    public object SourceData { get; set; }
    
    /// <summary>
    /// æŒ‡ä»¤å•å…ƒåˆ—è¡¨
    /// </summary>
    public List<InstructUnitVo> InstructUnits { get; set; }
    
    /// <summary>
    /// ä»»åŠ¡ä¸Šä¸‹æ–‡
    /// </summary>
    public CTaskContext TaskContext { get; set; }
    
    /// <summary>
    /// æ‰§è¡ŒçŠ¶æ€
    /// </summary>
    public TaskExecutionState ExecutionState { get; set; }
    
    /// <summary>
    /// åˆ›å»ºæ—¶é—´
    /// </summary>
    public DateTime CreateTime { get; set; }
    
    /// <summary>
    /// å¼€å§‹æ—¶é—´
    /// </summary>
    public DateTime? StartTime { get; set; }
    
    /// <summary>
    /// å®Œæˆæ—¶é—´
    /// </summary>
    public DateTime? CompletionTime { get; set; }
    
    /// <summary>
    /// ä»»åŠ¡ä¼˜å…ˆçº§
    /// </summary>
    public int Priority { get; set; }
    
    /// <summary>
    /// é‡è¯•æ¬¡æ•°
    /// </summary>
    public int RetryCount { get; set; }
    
    /// <summary>
    /// æœ€å¤§é‡è¯•æ¬¡æ•°
    /// </summary>
    public int MaxRetryCount { get; set; } = 3;
}

/// <summary>
/// ä»»åŠ¡æ¥æºç±»å‹
/// </summary>
public enum TaskSourceType
{
    MQTT = 1,        // MQTTä»»åŠ¡
    Platform = 2,    // å¹³å°ä»»åŠ¡
    Script = 3,      // è„šæœ¬ä»»åŠ¡
    Timer = 4,       // å®šæ—¶ä»»åŠ¡
    Manual = 5       // æ‰‹åŠ¨ä»»åŠ¡
}

/// <summary>
/// ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€
/// </summary>
public enum TaskExecutionState
{
    Created = 0,      // å·²åˆ›å»º
    Queued = 1,       // å·²æ’é˜Ÿ
    Running = 2,      // è¿è¡Œä¸­
    Paused = 3,       // å·²æš‚åœ
    Completed = 4,    // å·²å®Œæˆ
    Failed = 5,       // å·²å¤±è´¥
    Cancelled = 6     // å·²å–æ¶ˆ
}
```

### 3.3 ç»Ÿä¸€ä»»åŠ¡æ§åˆ¶å™¨å®ç°

```csharp
/// <summary>
/// ç»Ÿä¸€ä»»åŠ¡è°ƒåº¦æ§åˆ¶å™¨
/// </summary>
public class CUnifiedTaskController : IDisposable
{
    #region å­—æ®µå®šä¹‰
    
    /// <summary>
    /// ä»»åŠ¡é˜Ÿåˆ— - æŒ‰ä¼˜å…ˆçº§æ’åº
    /// </summary>
    private readonly PriorityQueue<CUnifiedTask, int> taskQueue = new();
    
    /// <summary>
    /// è¿è¡Œä¸­çš„ä»»åŠ¡
    /// </summary>
    private readonly ConcurrentDictionary<string, CUnifiedTask> runningTasks = new();
    
    /// <summary>
    /// ä»»åŠ¡ç”Ÿäº§å™¨åˆ—è¡¨
    /// </summary>
    private readonly ConcurrentDictionary<TaskSourceType, ITaskProducer> taskProducers = new();
    
    /// <summary>
    /// ä»»åŠ¡å†å²è®°å½•
    /// </summary>
    private readonly ConcurrentDictionary<string, CUnifiedTask> taskHistory = new();
    
    /// <summary>
    /// æœ€å¤§å¹¶å‘ä»»åŠ¡æ•°
    /// </summary>
    private int maxConcurrentTasks = 5;
    
    /// <summary>
    /// è°ƒåº¦å™¨è¿è¡ŒçŠ¶æ€
    /// </summary>
    private volatile bool isRunning = false;
    
    /// <summary>
    /// è°ƒåº¦çº¿ç¨‹
    /// </summary>
    private Task schedulerTask;
    
    /// <summary>
    /// å–æ¶ˆä»¤ç‰Œ
    /// </summary>
    private CancellationTokenSource cancellationTokenSource;
    
    #endregion
    
    #region æ ¸å¿ƒè°ƒåº¦æ–¹æ³•
    
    /// <summary>
    /// å¯åŠ¨è°ƒåº¦å™¨
    /// </summary>
    public void Start()
    {
        if (isRunning) return;
        
        isRunning = true;
        cancellationTokenSource = new CancellationTokenSource();
        
        // å¯åŠ¨æ‰€æœ‰ä»»åŠ¡ç”Ÿäº§å™¨
        foreach (var producer in taskProducers.Values)
        {
            producer.Start();
        }
        
        // å¯åŠ¨è°ƒåº¦çº¿ç¨‹
        schedulerTask = Task.Run(SchedulerLoop, cancellationTokenSource.Token);
        
        LogHelper.WriteSysLog("ç»Ÿä¸€ä»»åŠ¡è°ƒåº¦å™¨å·²å¯åŠ¨");
    }
    
    /// <summary>
    /// è°ƒåº¦å™¨ä¸»å¾ªç¯
    /// </summary>
    private async Task SchedulerLoop()
    {
        while (isRunning && !cancellationTokenSource.Token.IsCancellationRequested)
        {
            try
            {
                // 1. æ£€æŸ¥è¿è¡Œä¸­ä»»åŠ¡çŠ¶æ€
                CheckRunningTasks();
                
                // 2. ä»é˜Ÿåˆ—ä¸­å–å‡ºå¾…æ‰§è¡Œä»»åŠ¡
                if (runningTasks.Count < maxConcurrentTasks && taskQueue.TryDequeue(out var task, out var priority))
                {
                    // 3. å¯åŠ¨ä»»åŠ¡æ‰§è¡Œ
                    await StartTaskExecution(task);
                }
                
                // 4. æ¸…ç†å®Œæˆçš„ä»»åŠ¡
                CleanupCompletedTasks();
                
                // 5. ç­‰å¾…ä¸‹ä¸€è½®è°ƒåº¦
                await Task.Delay(100, cancellationTokenSource.Token);
            }
            catch (Exception ex)
            {
                LogHelper.WriteErrInfo($"è°ƒåº¦å™¨å¾ªç¯å¼‚å¸¸: {ex.Message}");
                await Task.Delay(1000, cancellationTokenSource.Token);
            }
        }
    }
    
    /// <summary>
    /// å¯åŠ¨ä»»åŠ¡æ‰§è¡Œ
    /// </summary>
    private async Task StartTaskExecution(CUnifiedTask task)
    {
        try
        {
            // 1. æ·»åŠ åˆ°è¿è¡Œé˜Ÿåˆ—
            runningTasks.TryAdd(task.TaskId, task);
            
            // 2. æ›´æ–°ä»»åŠ¡çŠ¶æ€
            task.ExecutionState = TaskExecutionState.Running;
            task.StartTime = DateTime.Now;
            
            // 3. å¼‚æ­¥æ‰§è¡Œä»»åŠ¡
            _ = Task.Run(async () =>
            {
                try
                {
                    await ExecuteTaskInstructions(task);
                }
                catch (Exception ex)
                {
                    LogHelper.WriteErrInfo($"ä»»åŠ¡æ‰§è¡Œå¼‚å¸¸ {task.TaskId}: {ex.Message}");
                    task.ExecutionState = TaskExecutionState.Failed;
                }
                finally
                {
                    // 4. ä»è¿è¡Œé˜Ÿåˆ—ç§»é™¤
                    runningTasks.TryRemove(task.TaskId, out _);
                    
                    // 5. æ·»åŠ åˆ°å†å²è®°å½•
                    task.CompletionTime = DateTime.Now;
                    taskHistory.TryAdd(task.TaskId, task);
                    
                    // 6. è§¦å‘å®Œæˆäº‹ä»¶
                    OnTaskCompleted(task);
                }
            });
            
            LogHelper.WriteSysLog($"ä»»åŠ¡å¼€å§‹æ‰§è¡Œ: {task.TaskId}");
        }
        catch (Exception ex)
        {
            LogHelper.WriteErrInfo($"å¯åŠ¨ä»»åŠ¡æ‰§è¡Œå¤±è´¥ {task.TaskId}: {ex.Message}");
            task.ExecutionState = TaskExecutionState.Failed;
        }
    }
    
    /// <summary>
    /// æ‰§è¡Œä»»åŠ¡æŒ‡ä»¤
    /// </summary>
    private async Task ExecuteTaskInstructions(CUnifiedTask task)
    {
        var executor = new CTaskInstructExecutor(task);
        await executor.ExecuteAsync();
        
        task.ExecutionState = TaskExecutionState.Completed;
        LogHelper.WriteSysLog($"ä»»åŠ¡æ‰§è¡Œå®Œæˆ: {task.TaskId}");
    }
    
    #endregion
    
    #region ä»»åŠ¡ç®¡ç†æ–¹æ³•
    
    /// <summary>
    /// æäº¤ä»»åŠ¡
    /// </summary>
    public bool SubmitTask(CUnifiedTask task)
    {
        try
        {
            // éªŒè¯ä»»åŠ¡
            if (ValidateTask(task))
            {
                // æ·»åŠ åˆ°é˜Ÿåˆ—
                task.ExecutionState = TaskExecutionState.Queued;
                taskQueue.Enqueue(task, task.Priority);
                
                LogHelper.WriteSysLog($"ä»»åŠ¡æäº¤æˆåŠŸ: {task.TaskId}");
                return true;
            }
            return false;
        }
        catch (Exception ex)
        {
            LogHelper.WriteErrInfo($"æäº¤ä»»åŠ¡å¤±è´¥: {ex.Message}");
            return false;
        }
    }
    
    /// <summary>
    /// æš‚åœä»»åŠ¡
    /// </summary>
    public bool PauseTask(string taskId)
    {
        if (runningTasks.TryGetValue(taskId, out var task))
        {
            task.ExecutionState = TaskExecutionState.Paused;
            LogHelper.WriteSysLog($"ä»»åŠ¡å·²æš‚åœ: {taskId}");
            return true;
        }
        return false;
    }
    
    /// <summary>
    /// æ¢å¤ä»»åŠ¡
    /// </summary>
    public bool ResumeTask(string taskId)
    {
        if (runningTasks.TryGetValue(taskId, out var task) && 
            task.ExecutionState == TaskExecutionState.Paused)
        {
            task.ExecutionState = TaskExecutionState.Running;
            LogHelper.WriteSysLog($"ä»»åŠ¡å·²æ¢å¤: {taskId}");
            return true;
        }
        return false;
    }
    
    /// <summary>
    /// å–æ¶ˆä»»åŠ¡
    /// </summary>
    public bool CancelTask(string taskId)
    {
        // ä»é˜Ÿåˆ—ä¸­ç§»é™¤
        bool removedFromQueue = RemoveFromQueue(taskId);
        
        // ä»è¿è¡Œä¸­ä»»åŠ¡ç§»é™¤
        if (runningTasks.TryRemove(taskId, out var task))
        {
            task.ExecutionState = TaskExecutionState.Cancelled;
            task.CompletionTime = DateTime.Now;
            taskHistory.TryAdd(taskId, task);
            LogHelper.WriteSysLog($"è¿è¡Œä¸­ä»»åŠ¡å·²å–æ¶ˆ: {taskId}");
            return true;
        }
        
        return removedFromQueue;
    }
    
    #endregion
    
    #region ç”Ÿäº§å™¨ç®¡ç†
    
    /// <summary>
    /// æ³¨å†Œä»»åŠ¡ç”Ÿäº§å™¨
    /// </summary>
    public void RegisterProducer(ITaskProducer producer)
    {
        taskProducers.TryAdd(producer.SourceType, producer);
        
        // ç»‘å®šä»»åŠ¡ç”Ÿäº§äº‹ä»¶
        producer.TaskProduced += OnTaskProduced;
        
        LogHelper.WriteSysLog($"ä»»åŠ¡ç”Ÿäº§å™¨å·²æ³¨å†Œ: {producer.ProducerName}");
    }
    
    /// <summary>
    /// ä»»åŠ¡ç”Ÿäº§äº‹ä»¶å¤„ç†
    /// </summary>
    private void OnTaskProduced(object sender, TaskProducedEventArgs e)
    {
        SubmitTask(e.Task);
    }
    
    #endregion
}
```

---

## 4. MQTTä»»åŠ¡ç”Ÿäº§å™¨å®ç°

### 4.1 MQTTä»»åŠ¡ç”Ÿäº§å™¨

```csharp
/// <summary>
/// MQTTä»»åŠ¡ç”Ÿäº§å™¨
/// </summary>
public class MqttTaskProducer : ITaskProducer
{
    public string ProducerName => "MQTTä»»åŠ¡ç”Ÿäº§å™¨";
    public TaskSourceType SourceType => TaskSourceType.MQTT;
    
    private MqttHelper mqttHelper;
    private IMainController mainController;
    
    public event EventHandler<TaskProducedEventArgs> TaskProduced;
    
    public MqttTaskProducer(IMainController mainController)
    {
        this.mainController = mainController;
        InitializeMqttHelper();
    }
    
    private void InitializeMqttHelper()
    {
        var config = MqttConfig.FromSysConfig(mainController.SysCfgInfo);
        mqttHelper = new MqttHelper(config);
        
        // è®¢é˜…MQTTæ¶ˆæ¯
        mqttHelper.MessageReceived += OnMqttMessageReceived;
    }
    
    private void OnMqttMessageReceived(object sender, MqttMessageEventArgs e)
    {
        try
        {
            if (e.Topic == "wu-agv/scheduler/task/command")
            {
                var taskCommand = JsonConvert.DeserializeObject<TaskCommandMessage>(e.Message);
                if (ValidateSourceData(taskCommand))
                {
                    var unifiedTask = ProduceTask(taskCommand);
                    TaskProduced?.Invoke(this, new TaskProducedEventArgs(unifiedTask));
                }
            }
        }
        catch (Exception ex)
        {
            LogHelper.WriteErrInfo($"å¤„ç†MQTTæ¶ˆæ¯å¤±è´¥: {ex.Message}");
        }
    }
    
    public CUnifiedTask ProduceTask(object sourceData)
    {
        var taskCommand = sourceData as TaskCommandMessage;
        if (taskCommand == null) return null;
        
        try
        {
            // 1. è·å–å·¥åºé…ç½®
            var instructCombination = GetInstructCombinationByTaskType(taskCommand.type);
            if (instructCombination == null)
            {
                throw new Exception($"æ‰¾ä¸åˆ°å¯¹åº”çš„å·¥åºé…ç½®: {taskCommand.type}");
            }
            
            // 2. åˆ›å»ºç»Ÿä¸€ä»»åŠ¡
            var unifiedTask = new CUnifiedTask
            {
                TaskId = taskCommand.task_id,
                SourceType = TaskSourceType.MQTT,
                SourceData = taskCommand,
                InstructUnits = instructCombination.BList,
                Priority = taskCommand.PriorityInt,
                CreateTime = DateTime.Now,
                ExecutionState = TaskExecutionState.Created,
                TaskContext = new CTaskContext
                {
                    TaskInfo = CreateTaskInfo(taskCommand),
                    DeviceBindings = new Dictionary<string, object>(),
                    ContextData = new Dictionary<string, object>
                    {
                        ["mqtt_task_type"] = taskCommand.type,
                        ["samples"] = taskCommand.samples,
                        ["priority"] = taskCommand.priority
                    }
                }
            };
            
            LogHelper.WriteSysLog($"MQTTä»»åŠ¡ç”Ÿäº§æˆåŠŸ: {taskCommand.task_id}");
            return unifiedTask;
        }
        catch (Exception ex)
        {
            LogHelper.WriteErrInfo($"MQTTä»»åŠ¡ç”Ÿäº§å¤±è´¥: {ex.Message}");
            return null;
        }
    }
    
    public bool ValidateSourceData(object sourceData)
    {
        if (sourceData is TaskCommandMessage taskCommand)
        {
            return !string.IsNullOrEmpty(taskCommand.task_id) 
                   && !string.IsNullOrEmpty(taskCommand.type);
        }
        return false;
    }
    
    private InstructCombinationVo GetInstructCombinationByTaskType(string taskType)
    {
        // æ ¹æ®ä»»åŠ¡ç±»å‹è·å–å¯¹åº”çš„å·¥åºç»„åˆ
        var category = MqttMessageParser.GetTaskTypeCategory(taskType);
        string schemaName = $"Wu-AGV-{category}";
        
        return mainController.GetInstructCombinationByName(schemaName);
    }
    
    public void Start()
    {
        mqttHelper?.Connect();
        LogHelper.WriteSysLog("MQTTä»»åŠ¡ç”Ÿäº§å™¨å·²å¯åŠ¨");
    }
    
    public void Stop()
    {
        mqttHelper?.Disconnect();
        LogHelper.WriteSysLog("MQTTä»»åŠ¡ç”Ÿäº§å™¨å·²åœæ­¢");
    }
}
```

---

## 5. ä¼˜åŒ–æ•ˆæœå¯¹æ¯”åˆ†æ

### 5.1 æ¶æ„å¤æ‚åº¦å¯¹æ¯”

```
æ¶æ„å¤æ‚åº¦å¯¹æ¯”è¡¨

| ç»´åº¦ | å½“å‰æ¶æ„ | ç»Ÿä¸€æ¶æ„ | æ”¹è¿›æ•ˆæœ |
|------|----------|----------|----------|
| ç±»å±‚æ¬¡ | 4å±‚åµŒå¥— | 2å±‚æ‰å¹³ | å‡å°‘50% |
| çŠ¶æ€ç®¡ç† | 4ç§çŠ¶æ€ç±»å‹ | 1ç§ç»Ÿä¸€çŠ¶æ€ | å‡å°‘75% |
| å­—å…¸ç®¡ç† | 5ä¸ªå¹¶å‘å­—å…¸ | 2ä¸ªå¹¶å‘å­—å…¸ | å‡å°‘60% |
| äº‹ä»¶ä¼ é€’ | 6å±‚ä¼ é€’é“¾ | 3å±‚ä¼ é€’é“¾ | å‡å°‘50% |
| ä»£ç è¡Œæ•° | ~3000è¡Œ | ~1500è¡Œ | å‡å°‘50% |
| å†…å­˜å ç”¨ | å¤šå±‚å¯¹è±¡åŒ…è£… | å•ä¸€å¯¹è±¡å®ä½“ | å‡å°‘40% |
```

### 5.2 åŠŸèƒ½å¯¹æ¯”

```
åŠŸèƒ½å®Œæ•´æ€§å¯¹æ¯”

âœ… ä¿æŒåŠŸèƒ½
â”œâ”€â”€ ä»»åŠ¡è°ƒåº¦æ‰§è¡Œ (ä¿æŒå®Œæ•´)
â”œâ”€â”€ è®¾å¤‡ç»‘å®šç®¡ç† (ä¿æŒå®Œæ•´)  
â”œâ”€â”€ æŒ‡ä»¤æ‰§è¡Œå¼•æ“ (ä¿æŒå®Œæ•´)
â”œâ”€â”€ MQTTä»»åŠ¡æ”¯æŒ (ä¿æŒå®Œæ•´)
â”œâ”€â”€ æ–­ç‚¹ç»­ä¼ åŠŸèƒ½ (ä¿æŒå®Œæ•´)
â””â”€â”€ å¹¶å‘æ§åˆ¶æœºåˆ¶ (ä¿æŒå®Œæ•´)

ğŸš€ åŠŸèƒ½å¢å¼º
â”œâ”€â”€ ç»Ÿä¸€ä»»åŠ¡æ¥å£ (æ–°å¢)
â”œâ”€â”€ æ’ä»¶åŒ–ç”Ÿäº§å™¨ (æ–°å¢)
â”œâ”€â”€ ä¼˜å…ˆçº§é˜Ÿåˆ—è°ƒåº¦ (å¢å¼º)
â”œâ”€â”€ ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç›‘æ§ (å¢å¼º)
â”œâ”€â”€ æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡ (æ–°å¢)
â””â”€â”€ æ•…éšœæ¢å¤æœºåˆ¶ (å¢å¼º)

âŒ ç§»é™¤å¤æ‚æ€§
â”œâ”€â”€ ä¸»ä»»åŠ¡/å­ä»»åŠ¡å±‚æ¬¡ (ç§»é™¤)
â”œâ”€â”€ å¤šç§ä»»åŠ¡æ¨¡å¼ (ç®€åŒ–ä¸ºç»Ÿä¸€æ¨¡å¼)
â”œâ”€â”€ CTaskDataåŒ…è£…ç±» (ç§»é™¤)
â”œâ”€â”€ å¤æ‚çŠ¶æ€åŒæ­¥ (ç®€åŒ–)
â””â”€â”€ å¤šå±‚å­—å…¸æŸ¥æ‰¾ (ä¼˜åŒ–)
```

### 5.3 æ€§èƒ½æå‡åˆ†æ

```
æ€§èƒ½æå‡æŒ‡æ ‡

ğŸ“ˆ æ‰§è¡Œæ•ˆç‡
â”œâ”€â”€ ä»»åŠ¡åˆ›å»ºæ—¶é—´: å‡å°‘60%
â”œâ”€â”€ ä»»åŠ¡æŸ¥æ‰¾æ—¶é—´: å‡å°‘80%  
â”œâ”€â”€ çŠ¶æ€åŒæ­¥æ—¶é—´: å‡å°‘70%
â””â”€â”€ å†…å­˜åˆ†é…æ¬¡æ•°: å‡å°‘50%

ğŸ“Š å¹¶å‘æ€§èƒ½
â”œâ”€â”€ æœ€å¤§å¹¶å‘ä»»åŠ¡æ•°: æå‡è‡³50+
â”œâ”€â”€ ä»»åŠ¡åˆ‡æ¢å¼€é”€: å‡å°‘40%
â”œâ”€â”€ é”ç«äº‰æ¬¡æ•°: å‡å°‘60%
â””â”€â”€ äº‹ä»¶å¤„ç†å»¶è¿Ÿ: å‡å°‘50%

ğŸ”§ ç»´æŠ¤æ€§
â”œâ”€â”€ ä»£ç å¯è¯»æ€§: æ˜¾è‘—æå‡
â”œâ”€â”€ åŠŸèƒ½æ‰©å±•æ€§: æ˜¾è‘—æå‡
â”œâ”€â”€ é—®é¢˜å®šä½æ•ˆç‡: æå‡3å€
â””â”€â”€ æ–°äººå­¦ä¹ æˆæœ¬: å‡å°‘70%
```

---

## 6. è¿ç§»å®æ–½æ–¹æ¡ˆ

### 6.1 åˆ†é˜¶æ®µè¿ç§»ç­–ç•¥

```
è¿ç§»è·¯çº¿å›¾ (3ä¸ªé˜¶æ®µ)

ğŸ—ï¸ ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æ¶æ„æ­å»º (2å‘¨)
â”œâ”€â”€ åˆ›å»ºCUnifiedTaskController
â”œâ”€â”€ å®ç°ITaskProduceræ¥å£  
â”œâ”€â”€ åˆ›å»ºCUnifiedTaskå®ä½“
â”œâ”€â”€ å®ç°åŸºç¡€è°ƒåº¦é€»è¾‘
â””â”€â”€ å•å…ƒæµ‹è¯•è¦†ç›–

ğŸ”„ ç¬¬äºŒé˜¶æ®µï¼šç”Ÿäº§å™¨è¿ç§» (3å‘¨)
â”œâ”€â”€ å®ç°MqttTaskProducer
â”œâ”€â”€ å®ç°PlatformTaskProducer
â”œâ”€â”€ ä¿®æ”¹ç°æœ‰MQTTå¤„ç†é€»è¾‘
â”œâ”€â”€ ä¿æŒåŒè½¨å¹¶è¡Œè¿è¡Œ
â””â”€â”€ åŠŸèƒ½å›å½’æµ‹è¯•

ğŸš€ ç¬¬ä¸‰é˜¶æ®µï¼šå®Œå…¨åˆ‡æ¢ (2å‘¨)
â”œâ”€â”€ ç§»é™¤æ—§çš„CTaskMain/CTaskSub
â”œâ”€â”€ æ¸…ç†å†—ä½™ä»£ç 
â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–è°ƒæ•´
â”œâ”€â”€ å…¨é¢é›†æˆæµ‹è¯•
â””â”€â”€ ä¸Šçº¿éƒ¨ç½²éªŒè¯
```

### 6.2 å…¼å®¹æ€§ä¿éšœ

```csharp
/// <summary>
/// å…¼å®¹æ€§é€‚é…å™¨ - ä¿è¯ç°æœ‰æ¥å£ä¸å—å½±å“
/// </summary>
public class CompatibilityAdapter : ICTaskController
{
    private CUnifiedTaskController unifiedController;
    
    public CompatibilityAdapter(CUnifiedTaskController unifiedController)
    {
        this.unifiedController = unifiedController;
    }
    
    // ä¿æŒç°æœ‰æ¥å£ä¸å˜ï¼Œå†…éƒ¨è½¬æ¢ä¸ºç»Ÿä¸€ä»»åŠ¡è°ƒç”¨
    public void Begin(CTaskEvent ccdqEvent)
    {
        // è½¬æ¢ä¸ºç»Ÿä¸€ä»»åŠ¡æ ¼å¼
        var unifiedTask = ConvertToUnifiedTask(ccdqEvent);
        unifiedController.SubmitTask(unifiedTask);
    }
    
    public void Pause(CTaskEvent ccdqEvent)
    {
        unifiedController.PauseTask(ccdqEvent.TaskSubId ?? ccdqEvent.Scheduled?.Id.ToString());
    }
    
    // å…¶ä»–æ¥å£æ–¹æ³•...
}
```

---

## 7. é¢„æœŸæ”¶ç›Šæ€»ç»“

### 7.1 æŠ€æœ¯æ”¶ç›Š

```
æŠ€æœ¯æ¶æ„æ”¶ç›Š
â”œâ”€â”€ ğŸ’¡ è®¾è®¡ç®€æ´æ€§
â”‚   â”œâ”€â”€ å•ä¸€èŒè´£åŸåˆ™è´¯å½»
â”‚   â”œâ”€â”€ ä¾èµ–å…³ç³»ç®€åŒ–  
â”‚   â”œâ”€â”€ æ¥å£è®¾è®¡æ¸…æ™°
â”‚   â””â”€â”€ æ‰©å±•æ€§æ˜¾è‘—æå‡
â”‚
â”œâ”€â”€ ğŸš€ æ€§èƒ½æå‡
â”‚   â”œâ”€â”€ å†…å­˜å ç”¨å‡å°‘40%
â”‚   â”œâ”€â”€ æ‰§è¡Œæ•ˆç‡æå‡60%
â”‚   â”œâ”€â”€ å¹¶å‘èƒ½åŠ›æå‡5å€
â”‚   â””â”€â”€ å“åº”å»¶è¿Ÿå‡å°‘50%
â”‚
â””â”€â”€ ğŸ”§ ç»´æŠ¤æ€§æå‡
    â”œâ”€â”€ ä»£ç é‡å‡å°‘50%
    â”œâ”€â”€ å¤æ‚åº¦é™ä½70%
    â”œâ”€â”€ Bugå®šä½æ•ˆç‡æå‡3å€
    â””â”€â”€ æ–°åŠŸèƒ½å¼€å‘æ•ˆç‡æå‡2å€
```

### 7.2 ä¸šåŠ¡æ”¶ç›Š

```
ä¸šåŠ¡ä»·å€¼æ”¶ç›Š
â”œâ”€â”€ ğŸ“ˆ è¿è¥æ•ˆç‡
â”‚   â”œâ”€â”€ ä»»åŠ¡å¤„ç†èƒ½åŠ›æå‡5å€
â”‚   â”œâ”€â”€ ç³»ç»Ÿç¨³å®šæ€§æ˜¾è‘—æå‡
â”‚   â”œâ”€â”€ æ•…éšœæ¢å¤æ—¶é—´å‡å°‘80%
â”‚   â””â”€â”€ ç›‘æ§å‘Šè­¦ç²¾å‡†åº¦æå‡
â”‚
â”œâ”€â”€ ğŸ”Œ é›†æˆèƒ½åŠ›
â”‚   â”œâ”€â”€ æ–°ä»»åŠ¡æºæ¥å…¥ç®€åŒ–
â”‚   â”œâ”€â”€ ç¬¬ä¸‰æ–¹ç³»ç»Ÿå¯¹æ¥å®¹æ˜“
â”‚   â”œâ”€â”€ å¤šåè®®æ”¯æŒç»Ÿä¸€
â”‚   â””â”€â”€ æ’ä»¶åŒ–æ‰©å±•æœºåˆ¶
â”‚
â””â”€â”€ ğŸ’° æˆæœ¬æ•ˆç›Š
    â”œâ”€â”€ å¼€å‘æˆæœ¬é™ä½60%
    â”œâ”€â”€ ç»´æŠ¤æˆæœ¬é™ä½70%
    â”œâ”€â”€ åŸ¹è®­æˆæœ¬é™ä½80%
    â””â”€â”€ ç¡¬ä»¶èµ„æºéœ€æ±‚å‡å°‘40%
```

---

## 8. ç»“è®ºä¸å»ºè®®

### 8.1 æ ¸å¿ƒç»“è®º

SchedAppCoreå½“å‰çš„ä¸»ä»»åŠ¡å¥—å­ä»»åŠ¡æ¶æ„å­˜åœ¨æ˜æ˜¾çš„è®¾è®¡ç¼ºé™·ï¼Œ**å»ºè®®ç«‹å³å®æ–½ç»Ÿä¸€å•ä»»åŠ¡åˆ—è¡¨é‡æ„**ï¼š

1. **æ¶æ„ç®€åŒ–**: ä»4å±‚åµŒå¥—ç®€åŒ–ä¸º2å±‚æ‰å¹³æ¶æ„
2. **èŒè´£åˆ†ç¦»**: é€šè¿‡ç”Ÿäº§å™¨æ¨¡å¼å®ç°ä»»åŠ¡åˆ›å»ºä¸æ‰§è¡Œåˆ†ç¦»  
3. **æ€§èƒ½ä¼˜åŒ–**: é¢„æœŸæ•´ä½“æ€§èƒ½æå‡60%ä»¥ä¸Š
4. **ç»´æŠ¤ç®€åŒ–**: ä»£ç é‡å‡å°‘50%ï¼Œç»´æŠ¤æˆæœ¬é™ä½70%

### 8.2 å®æ–½å»ºè®®

1. **ç«‹å³å¯åŠ¨**: ä¼˜å…ˆçº§è°ƒæ•´ä¸ºæœ€é«˜ï¼Œç«‹å³ç»„ç»‡æ ¸å¿ƒå›¢é˜Ÿå¼€å§‹é‡æ„
2. **åˆ†é˜¶æ®µå®æ–½**: é‡‡ç”¨3é˜¶æ®µè¿ç§»ç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿå¹³æ»‘è¿‡æ¸¡
3. **å…¼å®¹æ€§ä¿éšœ**: é€šè¿‡é€‚é…å™¨æ¨¡å¼ä¿è¯ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
4. **å……åˆ†æµ‹è¯•**: æ¯ä¸ªé˜¶æ®µéƒ½è¦è¿›è¡Œå……åˆ†çš„åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•

### 8.3 é£é™©æ§åˆ¶

1. **æŠ€æœ¯é£é™©**: é€šè¿‡åŒè½¨å¹¶è¡Œè¿è¡Œé™ä½åˆ‡æ¢é£é™©
2. **ä¸šåŠ¡é£é™©**: ä¿æŒç°æœ‰æ¥å£å…¼å®¹æ€§ï¼Œç¡®ä¿ä¸šåŠ¡è¿ç»­æ€§
3. **æ—¶é—´é£é™©**: é¢„ç•™20%çš„ç¼“å†²æ—¶é—´åº”å¯¹æ„å¤–æƒ…å†µ
4. **äººå‘˜é£é™©**: æå‰è¿›è¡Œå›¢é˜ŸåŸ¹è®­å’ŒçŸ¥è¯†è½¬ç§»

**ç»Ÿä¸€å•ä»»åŠ¡åˆ—è¡¨æ¶æ„å°†ä¸ºSchedAppCoreå¸¦æ¥è´¨çš„é£è·ƒï¼Œæ˜¯ç³»ç»Ÿè¿ˆå‘ä¸‹ä¸€ä»£å·¥ä¸šè‡ªåŠ¨åŒ–è°ƒåº¦å¹³å°çš„å…³é”®ä¸€æ­¥ï¼**

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´:** 2025-06-18 24:30:00  
**æœ€åæ›´æ–°æ—¶é—´:** 2025-06-18 24:30:00  
**å®¡æ ¸çŠ¶æ€:** å¾…æŠ€æœ¯è¯„å®¡